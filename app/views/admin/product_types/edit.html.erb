<%= render partial: 'categories', locals: { current_category: @product_type.category, categories: @view.categories } %>

<%= content_for :tertiary do %>
  <div id="admin-nav">
    <%= link_to "admin", "/admin" %> &gt;
    <%= link_to "product types", admin_product_types_category_path(@product_type.category) %> &gt;
    <%= @product_type.name %>
  </div>
<% end -%>

<%= form_for([ :admin, @product_type ], html: { id: "product-type-form", class: "label-infield" }) do |f| %>
  <h3><%= @product_type.name %></h3>
  <dl class="clearfix">
    <fieldset>
      <dt>Name<strong class="required">*</strong></dt>
      <dd>
        <p>
          <%= f.label :name %>
          <br />
          <%= f.text_field :name %>
          <%= field_error @product_type, :name %>
        </p>
      </dd>
      <dt>Category<strong class="required">*</strong></dt>
      <dd>
        <p>
          <%= f.select :category_id, options_for_select(@view.categories.map { |c| [ c.name, c.id ] }, @product_type.category.id) %>
        </p>
      </dd>
      <dt>Priority<strong class="required">*</strong></dt>
      <dd>
        <p>
          <%= f.select :priority, options_for_select([[ "Get it", 1 ], [ "Consider it", 2 ], [ "Don't bother", 3 ]], @product_type.priority) %>
        </p>
      </dd>
      <dt>Age range<strong class="required">*</strong></dt>
      <dd>
        <p>
        <%= f.select :age_range_id, options_for_select(AgeRange.scoped.order(:position).map { |a| [ a.name, a.id ] }, @product_type.age_range_id) %>
        </p>
      </dd>
      <dt>Plural name<strong class="required">*</strong></dt>
      <dd>
        <p>
          <%= f.label :plural_name %>
          <br />
          <%= f.text_field :plural_name %>
          <%= field_error @product_type, :plural_name %>
        </p>
      </dd>
      <dt>Image name<strong class="required">*</strong></dt>
      <dd>
        <p>
          <%= f.label :image_name %>
          <br />
          <%= f.text_field :image_name %>
          <%= field_error @product_type, :image_name %>
        </p>
      </dd>
      <dt>Search index<strong class="required">*</strong></dt>
      <dd>
        <p>
          <%= f.select :search_index, options_for_select(@view.amazon_search_indexes.map { |i| [ i, i ] }, @product_type.search_index) %>
        </p>
      </dd>
      <dt>Search query</dt>
      <dd>
        <p>
          <%= f.label :search_query %>
          <br />
          <%= f.text_field :search_query %>
        </p>
      </dd>
    </fieldset>
  </dl>
  <div class="button-row">
    <div class="progress-container">
      <button type="reset" class="button" id="bt-cancel">Cancel</button>
      <button type="submit" class="button bt-color">Save</button>
      <%= image_tag("progress-bar.gif", :class => "progress", :style => "display: none;") %>
    </div>
  </div>
<% end -%>
