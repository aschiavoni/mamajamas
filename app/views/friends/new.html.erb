<% if current_user.present? && !current_user.guest?  -%>
  <%= content_for :nav do %>
    <ul class="sidemenu">
      <li>
        <%= link_to "Following", following_friends_path %>
      </li>
      <li>
        <%= link_to "Followers", followers_friends_path %>
      </li>
      <li class="current">
        <%= link_to "Discover", new_friend_path %>
      </li>
    </ul>
  <% end -%>
<% else -%>
  <% unless current_user.present? && current_user.guest? -%>
    <%= content_for :logged_out_header_buttons do %>
      <li id="startlist">
        <%= link_to "Start Your List", quiz_path, class: "button bt-color" %>
      </li>
    <% end -%>
  <% end -%>
<% end -%>
<h2 class="visuallyhidden">Find Friends</h2>
<!-- tabs -->
<div id="findfriends" class="tabs">
  <!-- tab: Mamajamas -->
  <h2 id="mamajamasfriends">Mamajamas</h2>
  <div class="tabbody">
    <div class="friends-sort" style="top: 151px">Sort by:
      <!-- drop-down menu -->
      <div class="choicedrop"> <a href="#">Popularity <span class="ss-dropdown"></span></a>
        <ul style="display:none; width:7.5em;">
          <li><a href="#">Popularity</a></li>
          <li><a href="#">Name</a></li>
          <li><a href="#">Last updated</a></li>
          <li><a href="#">Expert Lists</a></li>
        </ul>
      </div>
      <!-- /drop-down menu -->
    </div>
    <div class="friends-key" style="top: 151px;"> <span class="ss-icon ss-target expert"></span> = Expert List </div>
    <!-- Friends list (Mamajamas) -->
    <ul class="clearfix friends-list findfriends-lists">
      <% @view.recommended_friends.each do |friend| -%>
        <%= render partial: 'list_friend', locals: { friend: friend, following: (current_user ? current_user.following?(friend) : false), follow_text: "Follow" } %>
      <% end -%>
    </ul>
  </div>
  <!-- end tab: Mamajamas -->
  <!-- tab: Facebook -->
  <h2 id="facebookfriends">Facebook</h2>
  <div class="tabbody">
    <% if current_user.present? && current_user.facebook_connected? -%>
      <!-- Friends list (Facebook) -->
      <ul class="clearfix friends-list findfriends-lists">
        <% @view.mamajamas_facebook_friends.each do |friend| -%>
          <%= render partial: 'list_friend', locals: { friend: friend, following: current_user.following?(friend), follow_text: "Follow" } %>
        <% end -%>
        <%= render partial: 'invite', collection: @view.facebook_invites, locals: { prefix: "fb" } %>
      </ul>
    <% else  -%>
      <%= render 'prompt', provider: "Facebook", button_class: "bt-authfb" %>
    <% end -%>
  </div>
  <!-- end tab: Facebook -->
  <!-- begin tab: Gmail -->
  <h2 id="gmailfriends">Gmail</h2>
  <div class="tabbody">
    <% if current_user.present? && current_user.google_connected? -%>
      <% if @view.mamajamas_google_friends.any? || @view.google_invites.any? -%>
        <!-- Friends list (Google) -->
        <ul class="clearfix friends-list findfriends-lists">
          <% @view.mamajamas_google_friends.each do |friend| -%>
            <%= render partial: 'list_friend', locals: { friend: friend, following: current_user.following?(friend), follow_text: "Follow" } %>
        <% end -%>
        <%= render partial: 'invite', collection: @view.google_invites, locals: { prefix: "google" } %>
        </ul>
      <% else -%>
        <div class="friends-progress google-friends-progress">
          <%= image_tag "loader.gif" %>
          <h3>downloading gmail contacts</h3>
        </div>
      <% end -%>
    <% else  -%>
      <%= render 'prompt', provider: "Gmail", button_class: "bt-authgoogle" %>
    <% end -%>
  </div>
  <!-- end tab: Gmail -->
  <% if current_user.present? && !current_user.guest? -%>
    <!-- begin tab: Invite a Friend -->
    <h2 id="invitefriend">Invite a Friend</h2>
    <div class="tabbody form-page">
      <%= render partial: 'email_invite', locals: { email_invite: @view.email_invite } %>
    </div>
    <!-- end tab: Invite a Friend -->
  <% end -%>
</div>
<!-- end tabs -->
